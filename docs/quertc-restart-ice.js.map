{"version":3,"sources":["./libs/sample/restart-ice/src/lib/restart-ice.component.ts","./libs/sample/restart-ice/src/lib/restart-ice.component.html","./libs/sample/restart-ice/src/index.ts","./libs/sample/restart-ice/src/lib/restart-ice.module.ts"],"names":[],"mappings":"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","file":"quertc-restart-ice.js","sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  OnDestroy,\n  ViewChild,\n} from '@angular/core'\nimport { Logger, PeerState, PeerStats, WithTarget } from '@quertc/core'\nimport { OverlogService } from '@quertc/overlog'\nimport { BehaviorSubject, fromEvent, Subject } from 'rxjs'\nimport { takeUntil } from 'rxjs/operators'\n\nconst fromLoadedEvent = (element: HTMLVideoElement) => {\n  return fromEvent<WithTarget<HTMLVideoElement>>(element, 'loadedmetadata')\n}\n\nconst console = Logger\n\n@Component({\n  selector: 'quertc-restart-ice',\n  templateUrl: './restart-ice.component.html',\n  styleUrls: ['./restart-ice.component.scss'],\n})\nexport class RestartIceComponent implements AfterViewInit, OnDestroy {\n  subject$ = new Subject<void>()\n\n  @ViewChild('localVideo')\n  localVideoRef: ElementRef<HTMLVideoElement>\n  localVideo: HTMLVideoElement\n\n  localCandidate: PeerStats\n  remoteCandidate: PeerStats\n\n  @ViewChild('remoteVideo')\n  remoteVideoRef: ElementRef<HTMLVideoElement>\n  remoteVideo: HTMLVideoElement\n\n  startTime: number | null\n\n  localStream: MediaStream\n  pc1: RTCPeerConnection\n  pc2: RTCPeerConnection\n  offerOptions: RTCOfferOptions = {\n    offerToReceiveAudio: true,\n    offerToReceiveVideo: true,\n  }\n\n  private _startButton = new BehaviorSubject<boolean>(false)\n  public startButton$ = this._startButton.asObservable()\n  private _callButton = new BehaviorSubject<boolean>(true)\n  public callButton$ = this._callButton.asObservable()\n  private _restartButton = new BehaviorSubject<boolean>(true)\n  public restartButton$ = this._restartButton.asObservable()\n  private _hangupButton = new BehaviorSubject<boolean>(true)\n  public hangupButton$ = this._hangupButton.asObservable()\n\n  constructor(private overlog: OverlogService) {\n    this.createPeers()\n  }\n\n  ngAfterViewInit(): void {\n    this.localVideo = this.localVideoRef.nativeElement\n    this.remoteVideo = this.remoteVideoRef.nativeElement\n\n    fromLoadedEvent(this.localVideo)\n      .pipe(takeUntil(this.subject$))\n      .subscribe(({ target }) => {\n        console.log(`Local video: ${target.videoWidth}x${target.videoHeight}px`)\n      })\n    fromLoadedEvent(this.remoteVideo)\n      .pipe(takeUntil(this.subject$))\n      .subscribe(({ target }) => {\n        console.log(\n          `Remote video: ${target.videoWidth}x${target.videoHeight}px`\n        )\n      })\n\n    this.remoteVideo.onresize = () => {\n      console.log(\n        `Remote video size changed to ${this.remoteVideo.videoWidth}x${this.remoteVideo.videoHeight}px`\n      )\n      // Usaremos o primeiro retorno de chamada do tamanho como uma\n      // indicação de que o vídeo começou a ser reproduzido.\n      if (this.startTime) {\n        const elapsedTime = window.performance.now() - this.startTime\n        console.log(`Setup time: ${elapsedTime.toFixed(3)}ms`)\n        this.startTime = null\n        // Execute essas funções novamente para obter os relatórios getStats()\n        // com o tipo candidatePair e preencher os elementos de identificação do candidato.\n        this.checkStats(this.pc1)\n        this.checkStats(this.pc2)\n      }\n    }\n  }\n\n  getName = (pc: RTCPeerConnection) => {\n    return pc === this.pc1 ? 'pc1' : 'pc2'\n  }\n\n  getOtherPc = (pc: RTCPeerConnection) => {\n    return pc === this.pc1 ? this.pc2 : this.pc1\n  }\n\n  gotStream = (stream: MediaStream) => {\n    console.log('Received local stream')\n    this.localVideo.srcObject = stream\n    this.localStream = stream\n    this._callButton.next(false)\n  }\n\n  createPeers() {\n    const servers: RTCConfiguration = {\n      iceServers: [],\n    }\n    this.pc1 = this.pc1 = new RTCPeerConnection(servers)\n    console.log('Created local peer connection object this.pc1')\n    this.pc1.onicecandidate = (e) => this.onIceCandidate(this.pc1, e)\n    this.pc2 = this.pc2 = new RTCPeerConnection(servers)\n    console.log('Created remote peer connection object this.pc2')\n  }\n  start = () => {\n    console.log('Requesting local stream')\n    this._startButton.next(true)\n    navigator.mediaDevices\n      .getUserMedia({\n        audio: true,\n        video: true,\n      })\n      .then(this.gotStream)\n      .catch((e) => alert(`getUserMedia() error: ${e.name}`))\n  }\n\n  // Simula um reinício de gelo.\n  restart = () => {\n    this._restartButton.next(true)\n    this.offerOptions.iceRestart = true\n    this.overlog.show({ text: 'pc1 createOffer restart' })\n    this.pc1\n      .createOffer(this.offerOptions)\n      .then(this.onCreateOfferSuccess, this.onCreateSessionDescriptionError)\n  }\n\n  call = () => {\n    this._callButton.next(true)\n    this._hangupButton.next(false)\n    console.log('Starting call')\n\n    this.startTime = window.performance.now()\n    const videoTracks = this.localStream.getVideoTracks()\n    const audioTracks = this.localStream.getAudioTracks()\n    if (videoTracks.length > 0) {\n      console.log(`Using video device: ${videoTracks[0].label}`)\n    }\n    if (audioTracks.length > 0) {\n      console.log(`Using audio device: ${audioTracks[0].label}`)\n    }\n\n    this.createPeers()\n\n    this.pc2.onicecandidate = (e) => this.onIceCandidate(this.pc2, e)\n    this.pc1.oniceconnectionstatechange = (e) => {\n      this.onIceStateChange(this.pc1, e)\n      if (this.pc1 && this.pc1.iceConnectionState === PeerState.Connected) {\n        this._restartButton.next(false)\n      }\n    }\n    this.pc2.oniceconnectionstatechange = (e) =>\n      this.onIceStateChange(this.pc2, e)\n    this.pc2.ontrack = this.gotRemoteStream\n\n    this.localStream\n      .getTracks()\n      .forEach((track) => this.pc1.addTrack(track, this.localStream))\n    console.log('Added local stream to this.pc1')\n\n    this.overlog.show({ text: 'this.pc1 createOffer start' })\n    this.pc1\n      .createOffer(this.offerOptions)\n      .then(this.onCreateOfferSuccess, this.onCreateSessionDescriptionError)\n  }\n\n  onCreateSessionDescriptionError = (error: { toString: () => any }) => {\n    console.log(`Failed to create session description: ${error.toString()}`)\n  }\n\n  onCreateOfferSuccess = (desc: RTCSessionDescriptionInit) => {\n    console.log(`Offer from pc1\\n${desc.sdp}`)\n    console.log('pc1 setLocalDescription start')\n    this.pc1\n      .setLocalDescription(desc)\n      .then(\n        () => this.onSetLocalSuccess(this.pc1),\n        this.onSetSessionDescriptionError\n      )\n    console.log('pc2 setRemoteDescription start')\n    this.pc2\n      .setRemoteDescription(desc)\n      .then(\n        () => this.onSetRemoteSuccess(this.pc2),\n        this.onSetSessionDescriptionError\n      )\n    console.log('pc2 createAnswer start')\n    // Como o lado 'remoto' não tem fluxo de mídia, precisamos\n    // para passar as restrições certas para que ele\n    // aceitar a oferta de áudio e vídeo.\n    this.pc2\n      .createAnswer()\n      .then(this.onCreateAnswerSuccess, this.onCreateSessionDescriptionError)\n  }\n\n  onSetLocalSuccess = (pc: RTCPeerConnection) => {\n    console.log(`${this.getName(pc)} setLocalDescription complete`)\n  }\n\n  onSetRemoteSuccess = (pc: RTCPeerConnection) => {\n    console.log(`${this.getName(pc)} setRemoteDescription complete`)\n  }\n\n  onSetSessionDescriptionError = (error: Error) => {\n    console.log(`Failed to set session description: ${error.toString()}`)\n  }\n\n  gotRemoteStream = (e: RTCTrackEvent) => {\n    if (this.remoteVideo.srcObject !== e.streams[0]) {\n      this.remoteVideo.srcObject = e.streams[0]\n      this.overlog.show({ text: 'pc2 received remote stream' })\n    }\n  }\n\n  onCreateAnswerSuccess = (desc: RTCSessionDescriptionInit) => {\n    console.log(`Answer from pc2:\\n${desc.sdp}`)\n    console.log('pc2 setLocalDescription start')\n    this.pc2\n      .setLocalDescription(desc)\n      .then(\n        () => this.onSetLocalSuccess(this.pc2),\n        this.onSetSessionDescriptionError\n      )\n    console.log('pc1 setRemoteDescription start')\n    this.pc1\n      .setRemoteDescription(desc)\n      .then(\n        () => this.onSetRemoteSuccess(this.pc1),\n        this.onSetSessionDescriptionError\n      )\n  }\n\n  onIceCandidate = (\n    pc: RTCPeerConnection,\n    event: RTCPeerConnectionIceEvent\n  ) => {\n    if (event.candidate) {\n      this.getOtherPc(pc)\n        .addIceCandidate(event.candidate)\n        .then(\n          () => this.onAddIceCandidateSuccess(pc),\n          (err) => this.onAddIceCandidateError(pc, err)\n        )\n      console.log(\n        `${this.getName(pc)} ICE candidate: \\n${\n          event.candidate ? event.candidate.candidate : '(null)'\n        }`\n      )\n    }\n  }\n\n  onAddIceCandidateSuccess = (pc: RTCPeerConnection) => {\n    console.log(`${this.getName(pc)} addIceCandidate success`)\n  }\n\n  onAddIceCandidateError = (\n    pc: RTCPeerConnection,\n    error: { toString: () => any }\n  ) => {\n    console.log(\n      `${this.getName(pc)} failed to add ICE Candidate: ${error.toString()}`\n    )\n  }\n\n  onIceStateChange = (pc: RTCPeerConnection, event: any) => {\n    if (pc) {\n      console.log(`${this.getName(pc)} ICE state: ${pc.iceConnectionState}`)\n      console.log('ICE state change event: ', event)\n      // TODO: livre-se disso em favor de http://w3c.github.io/webrtc-pc/#widl-RTCIceTransport-onselectedcandidatepairchange\n      if (\n        pc.iceConnectionState === PeerState.Connected ||\n        pc.iceConnectionState === PeerState.Completed\n      ) {\n        this.checkStats(pc)\n      }\n    }\n  }\n\n  checkStats = (pc: RTCPeerConnection) => {\n    pc.getStats(null).then((results) => {\n      // descobrir o ip do par\n      let activeCandidatePair: any = null\n      let remoteCandidate: any = {}\n\n      // Procure o par candidato, primeiro o caminho da especificação.\n      results.forEach((report: RTCTransportStats) => {\n        if (report.type === 'transport') {\n          activeCandidatePair = results.get(\n            report.selectedCandidatePairId as string\n          )\n        }\n      })\n      // Fallback para Firefox.\n      if (!activeCandidatePair) {\n        results.forEach((report) => {\n          if (\n            report.type === 'candidate-pair' &&\n            report.state === 'succeeded' &&\n            report.selected\n          ) {\n            activeCandidatePair = report\n          }\n        })\n      }\n      if (activeCandidatePair && activeCandidatePair.remoteCandidateId) {\n        results.forEach((report) => {\n          if (\n            report.type === 'remote-candidate' &&\n            report.id === activeCandidatePair.remoteCandidateId\n          ) {\n            remoteCandidate = report\n          }\n        })\n      }\n      if (remoteCandidate && remoteCandidate.id) {\n        if (pc === this.pc1) {\n          this.localCandidate = remoteCandidate\n        } else {\n          this.remoteCandidate = remoteCandidate\n        }\n      }\n    })\n  }\n\n  hangup() {\n    this.overlog.show({ text: 'Ending call' })\n    this.pc1.close()\n    this.pc2.close()\n    Object.defineProperties(this.pc1, {})\n    Object.defineProperties(this.pc2, {})\n    this._hangupButton.next(true)\n    this._restartButton.next(true)\n    this._callButton.next(false)\n  }\n\n  ngOnDestroy() {\n    if (this.localStream) {\n      this.localStream.getTracks().forEach((t) => t.stop())\n    }\n  }\n}\n","<div id=\"video\">\n  <mat-card>\n    <label mat-card-title for=\"localCandidate\">Local candidate</label>\n    <p mat-card-subtitle id=\"localCandidate\">\n      <ng-container *ngIf=\"localCandidate; else localOff\">\n        <div>\n          ID: <span class=\"glare\">{{ localCandidate.id }}</span>\n        </div>\n        <div>\n          IP: <span class=\"glare\">{{ localCandidate.ip }}</span> Port:\n          <span class=\"glare\">{{ localCandidate.port }}</span> Protocol:\n          <span class=\"glare\">{{ localCandidate.protocol }}</span>\n        </div>\n      </ng-container>\n      <ng-template #localOff>\n        <span class=\"mat-hint\">Not connected</span>\n      </ng-template>\n    </p>\n    <video\n      mat-card-image\n      #localVideo\n      id=\"localVideo\"\n      playsinline\n      autoplay\n      muted\n    ></video>\n  </mat-card>\n  <mat-card>\n    <label mat-card-title for=\"localCandidate\">Remote candidate </label>\n    <p mat-card-subtitle id=\"remoteCandidate\">\n      <ng-container *ngIf=\"remoteCandidate; else remoteOff\">\n        <div>\n          ID: <span class=\"glare\">{{ remoteCandidate.id }}</span>\n        </div>\n        <div>\n          IP: <span class=\"glare\">{{ remoteCandidate.ip }}</span> Port:\n          <span class=\"glare\">{{ remoteCandidate.port }}</span> Protocol:\n          <span class=\"glare\">{{ remoteCandidate.protocol }}</span>\n        </div>\n      </ng-container>\n      <ng-template #remoteOff>\n        <span class=\"mat-hint\">Not connected</span>\n      </ng-template>\n    </p>\n    <video\n      mat-card-image\n      #remoteVideo\n      id=\"remoteVideo\"\n      playsinline\n      autoplay\n      muted\n    ></video>\n  </mat-card>\n</div>\n\n<mat-toolbar color=\"accent\" class=\"toolbar-footer\">\n  <button\n    #startButton\n    mat-button\n    [disabled]=\"startButton$ | async\"\n    id=\"startButton\"\n    (click)=\"start()\"\n  >\n    Start\n  </button>\n  <button\n    #callButton\n    mat-button\n    [disabled]=\"callButton$ | async\"\n    id=\"callButton\"\n    (click)=\"call()\"\n  >\n    Call\n  </button>\n  <button\n    #restartButton\n    mat-button\n    [disabled]=\"restartButton$ | async\"\n    id=\"restartButton\"\n    (click)=\"restart()\"\n  >\n    Restart ICE\n  </button>\n  <button\n    #hangupButton\n    mat-button\n    [disabled]=\"hangupButton$ | async\"\n    id=\"hangupButton\"\n    (click)=\"hangup()\"\n  >\n    Hang Up\n  </button>\n</mat-toolbar>\n","export * from './lib/restart-ice.component'\nexport * from './lib/restart-ice.module'\n","import { RouterModule } from '@angular/router'\nimport { NgModule } from '@angular/core'\nimport { CommonModule } from '@angular/common'\nimport { MatCardModule } from '@angular/material/card'\nimport { MatToolbarModule } from '@angular/material/toolbar'\nimport { MatButtonModule } from '@angular/material/button'\nimport { RestartIceComponent } from './restart-ice.component'\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatCardModule,\n    MatToolbarModule,\n    MatButtonModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: RestartIceComponent,\n      },\n    ]),\n  ],\n  declarations: [RestartIceComponent],\n})\nexport class RestartIceModule {}\n"],"sourceRoot":"webpack:///"}